<% @page_title = "填写订单信息"  %>

<%= render 'layouts/frontend/header' %>

<div class="page order-build">
    <div class="container">
       <%= render partial: 'nav', locals: {step: 3} %>

        <div class="section section-order">
            <header>订单状态</header>
            <main class="row">
                <div class="col-md-6 success">
                    <h3>订单提交成功</h3>
                    <p>请在 24 小时内完成支付，否则订单会自动取消。<br>我们将在您完成支付后的 15个工作日内发货。</p>
                </div>
                <div class="col-md-6">
                    <h4>订单详情</h4>
                    <p>订单编号：<%= @order.number %></p>
                    <p>收货信息：<%= "#{@order.shipping_address.province} #{@order.shipping_address.city} #{@order.shipping_address.district} #{@order.shipping_address.address}" %></p>
                    <p>联系电话：<%= @order.shipping_address.mobile %></p>
                    <p>收货人：&nbsp;&nbsp;&nbsp;&nbsp;<%= @order.shipping_address.name %></p>
                    <p class="tips">请确认订单信息无误，支付后不能修改。</p>
                </div>
            </main>
        </div>

        <%= form_for @order, url: wizard_path, html: {class: 'form-order-payment'}, method: :put do |f| %>
        <div class="section section-payment">
            <header>支付方式</header>
            <main class="row">
                <p class="title">支付平台</p>
                <div class="payments">
                    <label class="active">
                        <input type="radio" name="order[payment_method]" value="alipay" checked>
                        <img src="<%= asset_path('bank/alipay.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="wxpay">
                        <img src="<%= asset_path('bank/weixin.png') %>" />
                    </label>
                </div>

                <p class="title">网银支付</p>
                <!-- 这里是一个传递网银的参数例子 -->
                <input type="radio" name="order[payment_bank]" value="CMB">
                <!-- 这里是一个传递网银的参数例子 -->
                <div class="payments bank">
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="ABC">
                        <img src="<%= asset_path('bank/bank_01.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="ICBCB2C">
                        <img src="<%= asset_path('bank/bank_02.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="CCB">
                        <img src="<%= asset_path('bank/bank_03.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="POSTGC">
                        <img src="<%= asset_path('bank/bank_04.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="BOCB2C">
                        <img src="<%= asset_path('bank/bank_05.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="CMB">
                        <img src="<%= asset_path('bank/bank_06.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="SPDB">
                        <img src="<%= asset_path('bank/bank_08.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="CIB">
                        <img src="<%= asset_path('bank/bank_10.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="SPABANK">
                        <img src="<%= asset_path('bank/bank_11.png') %>" />
                    </label>
                    <label>
                        <input type="radio" name="order[payment_method]" value="bankpay" data-bank="GDB">
                        <img src="<%= asset_path('bank/bank_13.png') %>" />
                    </label>
                </div>

                <footer class="order-payment">
                    <p class="right">
                        <span>应付金额：<span class="price"><%= number_to_currency @order.total %></span></span>
                        <button type="submit" class="btn btn-default btn-lg" data-disable-with="正在跳转...">支付</button>
                    </p>
                </footer>
            </main>
        </div>
        <% end %>
    </div>
</div>

<%= render 'layouts/frontend/footer' %>
